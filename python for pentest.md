### Lecture Notes from Python for Penetration Tester 

#### If Statement

- if test_condition1:
    - do this 
- elif: 
    - do this 
- else: 
    - do this 


#### While Loops

- while statement_is_true:
    - do stuff 
    - do stuff 

- break: get out of innermost loop 
- continue: start the next pass of the innermost loop 
- pass: do nothing, placeholder 

- #!/usr/bin/python 
- age = 20
- while age > 10:
    - age = int(raw_input("What is your age?"))  
    - if age > 10: 
        - print "Your age > 10 "
    - else:
        - print "Your age is <= 10"

    
*** 
Exercise:  
- While loops can also have a "else" in Python 
- Explore this functionality and write a simple program to illustrate 

*** 
### For Loops 

>>> names = ['vivke', 'samdup', 'Rama']
>>> names 

>>> for name in names 
>>> print name 

>>> hybridList = [1, "vivek", 2, "samdup",[1,23,2]]
>>> hybridList 

>>> for item in hybridList:
>>> print item 

- for item in [1,2,3]
- for item in ['a',2,'3']
- for (x,y) in [("vivek", 31), ("samdup", 29)]
***
Exercise: 
- For loops can have a "else" statement as well 
- write a simple program to illustrate this functionality
***

### Emulating C style FOR loops

- C style loops: for (i=1; i<10; i++)

- Use range in python:

- range(lower, upper,step) creates a list for use 

- range(n)-[0, ...., n-1]

- example:
    - range(10)
    - [0,1,2...9]
    - range(1-10)
    - [1,2,3...9]
    - range(1,10,2)
    - [1,3,5,7,9]

- for item in range(1,10,2):
    print item 

***

### Functions:

- Functions allow sections of code to be grouped better as per functionality 

- def function(arg1, arg2=default, ...):
    - ...
    - ...
    - return value

- #/usr/bin/env python 
- import sys 
- def print5times (line_to_print)
    for count in range(0,5):
        print line_to_print
- print5times(sys.argv[1])  //command line argument 
- ./function.py hello

***
Write a function program yourself
***

### Class 
- Class Calculator:
    - def_init_(self, inp1, inp2):
        - self.a = inp1
        - self.b = inp2
    
    - def sum(self):
        - return self.a+self.b

    - def product(self):
        - return self.a*self.b

***
Example:

- #!/usr/bin/env python 

- class Calculator:
    - def __init__(self, ina, inb):
        - self.a = ina
        - self.b = inb 

    - def add(self):    // add routine
        - return self.a+self.b

    - def mul(self):
        - return self.a*self.b

- newCalculation = Calculator(10,20)
- print 'a+b: %d' %newCalculation.add()
- print 'a*b: %d' %newCalculation.mul()

### Inheritance  (extends the functionalities of the previous class)

- Class ScientificCalculator (Calculator):
    - def power(self):
        - return pow(self.a, self.b)

#### Exercise:
- What are Global, Class and Instance variables?
- How can we override a method in parent class?

### Creating Modules:
- Better way of organizing code 
- Can define classes, functions, and variable
- import MODULE_NAME
- from MODULE_NAME import ....

Note: We can use the common approach of import className. We can also do like this. Eg. 

-```#!/usr/bin/env python```
-```from classdemo import Scientific```
-```ins = Scientific(5,6)```
-```'%d'%ins.power()```

### Creating Packages

- Hierarchical file directory structure to organize code 
- consists of modules and sub-packages 

### Exception Handling 
- Simply put execeptions are error conditions which disrupt the normal flow of the program. 
- Python allows for a simple and elegant way to handle exceptions

- try:
    - a = 0/0
- except:
    - print "Exception Happened"

try: 
    a = 10/20
except:
    print "Exception"
else:
    print "No Exception"
finally:                        //regardless, it will print
    print "Cleanup code"


try: 
    a = 0/0
except ZeroDivisionError:
    print "Divide by Zero"
except:
    print "Unknow error"


***
try :
    a = 0/0 
except Exception as im:      // store the exception in im and print
    print im
***     

Exercise:
- Python allows for user defined exceptions. 
- Code up a demo which has a user defined exception and an example use case. 

*** 
###Python in Phone


#### to know the sqlite data

- sqlite3 /System/Library/Frameworks/CoreLocation.framework/Support/timezone.db
sqlite> .tables
sqlite> .schema Names
sqlite> select * from Names 

-> We got the database name = Names

- import sqlite3
- conn = sqlite3.connect('/System/Library/Frameworks/CoreLocation.framework/Support/timezone.db')
- cursor = conn.cursor()
- for zone in cur.execute("select * from Names"):
  print zone 

  Thus, we dumped the entire TimeZone. 

- For android user:  http://code.google.com/p/android-scripting/ 

### Python in your Wifi Router 
- Exercise: Purchase a DD-WRT compatible router (DLINK DIR-615 E4) and run python on it. 

- Open Source firmwares such as DD-WRT support running Python on them. 
    http://www.dd-wrt.com/site/index

## Module 2
### File Handling

### File I/O in Python 
- open(file_name, access_mode,buffering)
- read(byte_count)
- write(data)
- close()
- os.rename() os.delete()

## eg
fdesc = open("sam.txt","w")


# Read /var/log/messages

- find all the logs in it which pertain to USB and print them out selectively. 

- ```/#!/usr/bin/env python
- import sys
- logFile = open(sys.argv[1])
- print "Printing all lines with USB in it..."

- for line in logFile.readlines():
    -   if line.lower().find("usb") !=-1:
        - print line
- print "Done!"```

# Directory Details

- Methods for traversing directories 
- Listing files and their information 
- creating and deleting directories + files 
- test to check if something is a file or directory 

for item in os.listdir("."):
    if os.path.isfile(item):
        print(item + " is a file")
    elif: os.path.isdir(item):
        print(item + " is a directory")
    else:
        print("Unknown!")

## To get particular format files

import glob

for item in glob.glob(os.path.join(".","*"):
    print item

for item in glob.glob(os.path.join(".","*.py"):
    print item

for item in glob.glob(os.path.join(".","*.txt"):
    print item

### Find another library for large files. Read python glob documents

Create a program which can recursively traverse directories and print the file listing in a hierarchical way 

A 
-- a.txt
-- b.txt
-- B 
-----c.out

For any given filename list out all the stats related to the file such as size, creation time, path etc. 








    
